<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>çœŸå¿ƒè¯å¤§å†’é™©</title>
    <style>
        body {
            font-family: 'PingFang SC', 'Microsoft YaHei', sans-serif;
            background-color: #f2f2f2;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
        }

        .card {
            background: white;
            width: 85%;
            max-width: 350px;
            padding: 30px 20px;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            text-align: center;
            transition: all 0.3s ease;
        }

        h2 {
            margin-bottom: 20px;
            color: #333;
            font-size: 22px;
            min-height: 60px; /* é˜²æ­¢æ–‡å­—å˜åŒ–å¯¼è‡´é«˜åº¦è·³åŠ¨ */
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .icon-area {
            font-size: 80px;
            margin-bottom: 30px;
            height: 100px;
            display: none; /* é»˜è®¤éšè—ï¼Œç‰¹å®šçŠ¶æ€æ˜¾ç¤º */
            animation: bounce 1s infinite alternate;
        }

        .btn-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        button {
            padding: 12px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            cursor: pointer;
            transition: transform 0.1s;
            width: 100%;
        }

        button:active {
            transform: scale(0.95);
        }

        .btn-primary {
            background-color: #07c160; /* å¾®ä¿¡ç»¿ */
            color: white;
        }

        .btn-danger {
            background-color: #fa5151; /* çº¢è‰² */
            color: white;
        }

        .btn-secondary {
            background-color: #ededed;
            color: #333;
        }

        /* å¿ƒç¢åŠ¨ç”» */
        @keyframes shake {
            0% { transform: translate(1px, 1px) rotate(0deg); }
            10% { transform: translate(-1px, -2px) rotate(-1deg); }
            20% { transform: translate(-3px, 0px) rotate(1deg); }
            30% { transform: translate(3px, 2px) rotate(0deg); }
            40% { transform: translate(1px, -1px) rotate(1deg); }
            50% { transform: translate(-1px, 2px) rotate(-1deg); }
            60% { transform: translate(-3px, 1px) rotate(0deg); }
            70% { transform: translate(3px, 1px) rotate(-1deg); }
            80% { transform: translate(-1px, -1px) rotate(1deg); }
            90% { transform: translate(1px, 2px) rotate(0deg); }
            100% { transform: translate(1px, -2px) rotate(-1deg); }
        }

        /* çˆ±å¿ƒè·³åŠ¨ */
        @keyframes bounce {
            from { transform: scale(1); }
            to { transform: scale(1.1); }
        }

        .shake-text {
            animation: shake 0.5s;
        }
    </style>
</head>
<body>

    <div class="card" id="mainCard">
        <div class="icon-area" id="iconArea"></div>

        <h2 id="questionText">ä½ çˆ±ä¸çˆ±æˆ‘ï¼Ÿ</h2>

        <div class="btn-container" id="btnContainer">
            <button class="btn-primary" onclick="clickLove()">çˆ±</button>
            <button class="btn-secondary" onclick="clickNoLove()">ä¸çˆ±</button>
        </div>
    </div>

    <script>
        // è®¡æ•°å™¨
        let realLoveCount = 0; // "çœŸçš„çˆ±ä½ " ç‚¹å‡»æ¬¡æ•°
        let veryLoveCount = 0; // "éå¸¸çˆ±ä½ " ç‚¹å‡»æ¬¡æ•°
        let step = 0; // 0:åˆå§‹, 1:å¾ªç¯è´¨é—®

        const questionText = document.getElementById('questionText');
        const btnContainer = document.getElementById('btnContainer');
        const iconArea = document.getElementById('iconArea');

        // ç‚¹å‡»â€œçˆ±â€
        function clickLove() {
            step = 1;
            updateUIForLoop();
        }

        // ç‚¹å‡»â€œä¸çˆ±â€
        function clickNoLove() {
            questionText.innerText = "æˆ‘å°±çŸ¥é“ä½ ä¸çˆ±æˆ‘ï¼Œæ¸£ç”·ï¼";
            questionText.style.color = "#fa5151";

            iconArea.style.display = "block";
            iconArea.innerText = "ğŸ’”"; // å¿ƒç¢å›¾æ ‡
            iconArea.style.animation = "shake 0.5s"; // ä¸è·³åŠ¨ï¼Œæ”¹ä¸ºæŠ–åŠ¨

            btnContainer.innerHTML = ""; // æ¸…ç©ºæŒ‰é’®
        }

        // è¿›å…¥å¾ªç¯è´¨é—®æ¨¡å¼
        function updateUIForLoop() {
            questionText.innerText = "ä¸ä¿¡";
            // æ·»åŠ æŠ–åŠ¨æ•ˆæœä»¥ç¤ºé‡ç½®
            questionText.classList.remove('shake-text');
            void questionText.offsetWidth; // è§¦å‘é‡ç»˜
            questionText.classList.add('shake-text');

            iconArea.style.display = "none";

            btnContainer.innerHTML = `
                <button class="btn-primary" onclick="handleLoop('real')">çœŸçš„çˆ±ä½ </button>
                <button class="btn-danger" onclick="handleLoop('very')">éå¸¸çˆ±ä½ </button>
            `;
        }

        // å¤„ç†å¾ªç¯é‡Œçš„ç‚¹å‡»é€»è¾‘
        function handleLoop(type) {
            // é€»è¾‘ï¼šå¿…é¡»å…ˆç‚¹3æ¬¡"çœŸçš„çˆ±ä½ "ï¼Œå†ç‚¹3æ¬¡"éå¸¸çˆ±ä½ "

            if (type === 'real') {
                realLoveCount++;
                // å¦‚æœå·²ç»åœ¨ç‚¹"éå¸¸çˆ±ä½ "çš„é˜¶æ®µåˆç‚¹äº†"çœŸçš„çˆ±ä½ "ï¼Œæ˜¯å¦é‡ç½®ï¼Ÿ
                // è¿™é‡Œä¸ºäº†ä½“éªŒæµç•…ï¼Œä¸é‡ç½®ï¼Œåªå•çº¯å¢åŠ è®¡æ•°ï¼Œä½†å¿…é¡»æ»¡è¶³é¡ºåº
            } else if (type === 'very') {
                if (realLoveCount >= 3) {
                    veryLoveCount++;
                } else {
                    // å¦‚æœæ²¡ç‚¹å¤Ÿ3æ¬¡"çœŸçš„"å°±ç‚¹"éå¸¸"ï¼Œé‡ç½®"éå¸¸"çš„è®¡æ•°ï¼Œæˆ–è€…ä»€ä¹ˆéƒ½ä¸åš
                    veryLoveCount = 0;
                }
            }

            // æ£€æŸ¥é€šå…³æ¡ä»¶
            if (realLoveCount >= 3 && veryLoveCount >= 3) {
                showSuccess();
            } else {
                // æ²¡é€šå…³ï¼Œç»§ç»­æ˜¾ç¤ºä¸ä¿¡ï¼ˆå¸¦ä¸€ç‚¹æ–‡å­—å˜åŒ–æˆ–åŠ¨ç”»åé¦ˆï¼‰
                updateUIForLoop();
            }
        }

        // æˆåŠŸé€šå…³
        function showSuccess() {
            questionText.innerText = "å¥½å§ï¼Œé‚£æˆ‘ç›¸ä¿¡äº†";
            questionText.style.color = "#07c160";

            iconArea.style.display = "block";
            iconArea.innerText = "â¤ï¸";
            iconArea.style.animation = "bounce 1s infinite alternate";

            btnContainer.innerHTML = ""; // æ¸…ç©ºæŒ‰é’®ï¼Œæˆ–è€…ç•™ä¸€ä¸ªâ€œçˆ±ä½ â€æŒ‰é’®
        }
    </script>
</body>
</html>
